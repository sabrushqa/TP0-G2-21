<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:p="http://primefaces.org/ui">
<h:head>
    <title>Chat avec API</title>
    <h:outputStylesheet library="css" name="style.css"/>
    <h:outputScript library="js" name="script.js"/>
</h:head>
<h:body>
    <h2>Chat avec l'API</h2>

    <h:form id="chatForm">
        <h:panelGrid columns="2" styleClass="main-grid">
            <!-- Colonne gauche : Zone de chat -->
            <h:panelGroup styleClass="chat-zone">
                <h:panelGrid columns="1" styleClass="form-grid">

                    <!-- Liste dÃ©roulante pour le rÃ´le -->
                    <h:panelGroup>
                        <h:outputLabel value="RÃ´le de l'API : " for="roleSelect"/>
                        <p:selectOneMenu id="roleSelect"
                                         value="#{chatBean.roleSysteme}"
                                         disabled="#{chatBean.roleChoisi}">
                            <f:selectItem itemLabel="Helpful assistant" itemValue="helpful assistant"/>
                            <f:selectItem itemLabel="Traducteur franÃ§ais-anglais" itemValue="traducteur franÃ§ais-anglais"/>
                            <f:selectItem itemLabel="Guide touristique" itemValue="guide touristique"/>
                        </p:selectOneMenu>
                    </h:panelGroup>

                    <!-- Zone de question -->
                    <h:panelGroup>
                        <h:outputLabel value="Question :" for="question"/>
                        <h:panelGroup styleClass="textarea-with-button">
                            <h:inputTextarea id="question"
                                             value="#{chatBean.question}"
                                             rows="5"
                                             cols="60"
                                             styleClass="question-area"
                                             required="true"
                                             requiredMessage="La question ne peut pas Ãªtre vide !"/>
                            <h:commandButton value="ðŸ“‹"
                                             onclick="copyToClipboard('chatForm:question'); return false;"
                                             styleClass="copy-btn"
                                             title="Copier"/>
                        </h:panelGroup>
                        <h:message for="question" styleClass="error-message"/>
                    </h:panelGroup>

                    <!-- Zone de rÃ©ponse -->
                    <h:panelGroup>
                        <h:outputLabel value="RÃ©ponse :" for="reponse"/>
                        <h:panelGroup styleClass="textarea-with-button">
                            <h:inputTextarea id="reponse"
                                             value="#{chatBean.reponse}"
                                             rows="5"
                                             cols="60"
                                             readonly="true"
                                             styleClass="reponse-area"/>
                            <h:commandButton value="ðŸ“‹"
                                             onclick="copyToClipboard('chatForm:reponse'); return false;"
                                             styleClass="copy-btn"
                                             title="Copier"/>
                        </h:panelGroup>
                    </h:panelGroup>

                    <!-- Boutons d'action -->
                    <h:panelGroup styleClass="button-group">
                        <h:commandButton value="Envoyer"
                                         action="#{chatBean.envoyerQuestion()}"
                                         styleClass="btn btn-primary"/>
                        <h:commandButton value="Effacer"
                                         action="#{chatBean.effacer()}"
                                         styleClass="btn btn-secondary"/>
                        <h:commandButton value="Nouveau chat"
                                         action="#{chatBean.nouveauChat()}"
                                         styleClass="btn btn-danger"/>
                    </h:panelGroup>
                </h:panelGrid>
            </h:panelGroup>

            <!-- Colonne droite : Historique -->
            <h:panelGroup styleClass="historique-zone">
                <h:outputLabel value="Historique de la conversation :" for="historique"/>
                <h:panelGroup styleClass="textarea-with-button">
                    <h:inputTextarea id="historique"
                                     value="#{chatBean.conversation}"
                                     rows="25"
                                     cols="50"
                                     readonly="true"
                                     styleClass="historique-area"/>
                    <h:commandButton value="ðŸ“‹"
                                     onclick="copyToClipboard('chatForm:historique'); return false;"
                                     styleClass="copy-btn"
                                     title="Copier"/>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGrid>
    </h:form>
</h:body>
</html>